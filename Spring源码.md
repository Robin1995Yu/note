# Spring 源码读书笔记
- Spring模块
  - Core Container 核心容器
    - Core和Beans是框架的基础部分 提供了IoC和依赖注入的特征 基础概念是BeanFactory 它提供了Factory模式的经典实现来消除程序对单例的需要 运行从程序中分离依赖关系和配置
    - Core
      - 核心工具类 其他模块都要用到这个包中的类
    - Beans
      - 所有应用都要用到 提供IoC（控制反转）和DI（依赖注入）
    - Context
      - 基于Core和Beans 继承Beans模块 提供大量扩展
      - ApplicationContext是Context模块的关键
    - Expression Language
      - 提供了强大的表达式语言
  - Data Access/Integration
    - JDBC
      - JDBC的抽象层
    - ORM
      - 为别的框架提供一个交互层
    - OXM
      - Object/XML映射实现
    - JMS
      - Java Message Service
      - 消息制造消费的特征
    - Transaction
      - 事务的实现
  - Web
    - 对于Web的实现以及对别的框架的支持
  - AOP
    - 面向切片编程的实现
  - Test
    - 对于测试模块的支持
- BeanFactory
  - Bean加载和获取的过程
    - XMLBeanFactory 读取配置
    - beanFactory.getBean获取bean
  - 参与的类
    - ConfigReader 读取及验证配置文件 放置在内存中
    - ReflectionUtil 反射实例化类
    - App完成整个逻辑的串联
  - 核心类
    - DefaultListableBeanFactory
## 结构组成
### beans
- 两大核心类
  - DefaultListableBeanFactory
    - XmlBeanFactory的父类 它和父类的不同是它在内部使用了XmlBeanDefinitionReader 实现了个性化的BeanDefinitionReader读取
    - 整个bean加载过程的核心部分 是Spring注册和加载bean的默认实现
    - 父类
      - AbstractAutowireCapableBeanFactory
    - 接口
      - BeanDefinitionRegistry
      - ConfigurableListableBeanFactory
  - XmlBeanDefinitionReader
    - XML配置文件读取是Spring中很重要的一部分 因为Spring的大部分配置都是通过XML文件为切入点的
    - 与其父类DefaultListableBeanFactory不同 它包含了自定义的XmlBeanDefinitionReader
      - XmlBeanDefinitionReader的过程
        1. 通过继承AbstractBeanDefinitionReader中的方法，使用ResourLoader将资源文件路径转化为对应的Resource文件
        2. 通过DocumentLoader对Resource文件进行转换，Resource->Document
        3. 通过DefaultBeanDefinitionDocumentReader对Document解析
        4. 通过BeanDefinitionParserDelegate对Element解析
- Resource接口
  - 将Spring中的资源抽象
    - File
    - URL
    - Classpath
    - 等
  - 提供了存在性 可读性 是否打开状态和对于转换到不同类型等方法
  - 实现
    - FileSystemResource
    - ClassPathResource
    - UrlResource
    - InputStreamResource
    - ByteArrayResource
    - 等
  - 将Resource转换成InputStream 交给XmlBeanDefinitionReader处理